stages:
  training:
    cmd: python script.py train
    deps:
    - script.py
    - utils/utils.py
    - var/holidays_events.csv
    - var/oil.csv
    - var/stores.csv
    - var/train.csv
    params:
    - utils/config.yml:
      - network_hyperparameters.hidden_dimensions
      - network_hyperparameters.n_layers
      - network_hyperparameters.additional_linear_layers
      - network_hyperparameters.dropout_rate
      - training_hyperparameters.batch_size
      - training_hyperparameters.num_epochs
      - training_hyperparameters.lr
    outs:
    - var/model.pkl
    metrics:
    - var/training_metrics.json
    plots:
    - var/epochs.csv
  inference:
    cmd: python script.py infer
    deps:
    - script.py
    - utils/utils.py
    - var/model.pkl
    outs:
    - submission.csv
